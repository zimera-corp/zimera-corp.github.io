<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Workaround for Compilation Result of TypeScript on import - Zimera Corporation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="/">

  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair&#43;Display:wght@600&amp;family=Source&#43;Sans&#43;Pro:wght@400;700&amp;display=swap" rel="stylesheet">



  
  
  
  
    
  
  <link rel="stylesheet" href="/css/style.min.2d6c7f09b6f23d89683ad8f04291ceab78102cf249eb695725b60153b80197ae.css">

  

  
    
    <meta property="og:title" content="Workaround for Compilation Result of TypeScript on import"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="/posts/00009/"/>
    
    
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@ZimeraCorp"/>
    <meta name="twitter:creator" content="@ZimeraCorp"/>
  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    
    
    <li class="menu-item-services ">
      <a href="/services/">
        <span>Services</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-team ">
      <a href="/team/">
        <span>Team</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-about ">
      <a href="/about/">
        <span>About</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-contact ">
      <a href="/contact/">
        <span>Contact</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-news ">
      <a href="/news/">
        <span>News</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-posts ">
      <a href="/posts/">
        <span>Posts</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="/"><img height=200px alt="Zimera Corporation" src="/images/logo/logo-zimera-corp.png" /></a>
    </div>
    <div class="logo-mobile">
      <a href="/"><img height=200px alt="Zimera Corporation" src="/images/logo/logo-zimera-corp--mobile.png" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    
    
    <li class="menu-item-services ">
      <a href="/services/">
        
        <span>Services</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-team ">
      <a href="/team/">
        
        <span>Team</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-about ">
      <a href="/about/">
        
        <span>About</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-contact ">
      <a href="/contact/">
        
        <span>Contact</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-news ">
      <a href="/news/">
        
        <span>News</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-posts ">
      <a href="/posts/">
        
        <span>Posts</span>
      </a>
    </li>
    
  </ul>
</div>

    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button" aria-label="Mobile Menu">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>

    
<div class="container pb-6 pt-6 pt-md-10 pb-md-10">
  <div class="row justify-content-start">
    <div class="col-12 col-md-8">
      <h1 class="title">Workaround for Compilation Result of TypeScript on import</h1>

    <p>Posted in: 
    
        
        <a href="/categories/software-engineering">Software Engineering</a>&nbsp;&nbsp;
        
    
    <br />
    Tags: 
    
        
        <a href="/tags/javascript">JavaScript</a>&nbsp;&nbsp;
        
        <a href="/tags/typescript">TypeScript</a>&nbsp;&nbsp;
        
    
    <br />
    Author: 
          Bambang Purnomosidi D. P.
	       | <time>February 27, 2023</time> | 
        2  minutes reading time
       </p>

      <div class="content"><p><a href="https://www.typescriptlang.org">TypeScript</a> is supertype of JavaScript, or for easier understanding, TypeScrirpt is JavaScript with syntax for types. It is now developed by Microsoft. It is a lovely programming language which tries to &ldquo;patch&rdquo; the flaws of JavaScript. TypeScript adds static typing to JavaScript, and as a static typing programming language it can be used to catch any errors before deployment (well, hopefully).</p>
<p>TypeScript compilation result is JavaScript. Documentation is very complete and details, but one thing that I found confusing is how TypeScript treats <em>import</em>. In the documentation, <em>import</em> statement instructed to be written like this for relatif TypeScript file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">blablabla</span> ...... <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;./path/to/lib&#39;</span>
</span></span></code></pre></div><p>Unfortunately, when you do this, the compilation result will be error if you try to execute the JavaScript file. For example, I have this kind of structure:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>├── db
</span></span><span style="display:flex;"><span>│   └── dbinit.ts
</span></span><span style="display:flex;"><span>└── index.ts
</span></span></code></pre></div><p>From <code>index.ts</code>, I want to use <code>dbinit.ts</code>, so, according to TypeScript documentation, this should be written (provided that sql is the result of a <em>const</em> inside dbinit.ts):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">sql</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;./db/dbinit&#39;</span>
</span></span></code></pre></div><p>This will be an error when I try to run <code>index.js</code> as the result of TypeScript compilation since TypeScript will not compile that line into JavaScript import. The result still the same:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">sql</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./db/dbinit&#39;</span>
</span></span></code></pre></div><p>The workaround is simple. When compile TS to JS for module import, <strong>always</strong> put <em>the future result for import statement</em>. Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">sql</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;./db/dbinit.js&#39;</span>
</span></span></code></pre></div><p><strong>DO NOT DO THIS</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">sql</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;./db/dbinit&#39;</span>
</span></span></code></pre></div><p>Inside db path, put this file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>src/db/
</span></span><span style="display:flex;"><span>└── dbinit.ts
</span></span></code></pre></div><p>in dir <code>db</code>, do not put <code>dbinit.js</code> but put <code>dbinit.ts</code>. The file <code>dbinit.js</code> in the source code above is the future compilation result. If we don&rsquo;t do this, there will be an error since TS will not compile <code>import sql from './db/dbinit'</code> to <code>import sql from './db/dbinit.js'</code>.</p>
<p>Although <a href="https://www.typescriptlang.org/docs/handbook/modules.html">TypeScript documentation</a> uses the latter (without extension), it won&rsquo;t work. This has been the source of debates:</p>
<ol>
<li><a href="https://github.com/microsoft/TypeScript/issues/40878">https://github.com/microsoft/TypeScript/issues/40878</a></li>
<li><a href="https://github.com/microsoft/TypeScript/issues/42813">https://github.com/microsoft/TypeScript/issues/42813</a></li>
<li><a href="https://github.com/microsoft/TypeScript/issues/47188">https://github.com/microsoft/TypeScript/issues/47188</a></li>
</ol>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="footer-inner">
          <h3 class="footer-title">Zimera Corporation</h3>
          <div id="footer-menu" class="footer-menu">
  <ul>
    
    
    
    
    <li class="menu-item-home ">
      <a href="/">
        
        <span>Home</span>
      </a>
    </li>
    
    
    
    <li class="menu-item-contact ">
      <a href="/contact/">
        
        <span>Contact</span>
      </a>
    </li>
    
  </ul>
</div>

          
        </div>
      </div>
    </div>
  </div>
</div>
  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          
            
<div class="social">
    
        <a href="https://github.com/zimera-corp" target="blank"><img src="/images/social/github.svg" title="Github" alt="Github" /></a>
    
        <a href="https://twitter.com/ZimeraCorp" target="blank"><img src="/images/social/twitter.svg" title="Twitter" alt="Twitter" /></a>
    
</div>

          
          
            <div class="copyright">Powered by <a class="zerostatic" href="https://gohugo.io">Hugo</a>, theme by <a class="zerostatic" href="https://www.zerostatic.io">www.zerostatic.io</a>, image: <a class="zerostatic" href="https://www.freepik.com/free-vector/people-analyzing-growth-charts_12643932.htm#query=data%20science&position=2&from_view=search&track=sph">Freepik</a></div>
          
        </div>
      </div>
    </div>
  </div>
</div>


  

  
  

  
    
  
  <script type="text/javascript" src="/js/scripts.min.8504133605a277da18f0d58cfd2e90d154962f4a961543a6e2f0a459a2d05462.js"></script>

  


  


</body>

</html>
